<html><head><title>corbeans: Spring-Boot Starter</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Manos Batsis" /><meta name="description" content="Corda integration for Spring-Boot" /><meta name="og:image" content="/corbeans/img/poster.png" /><meta name="og:title" content="corbeans: Spring-Boot Starter" /><meta name="og:site_name" content="corbeans" /><meta name="og:url" content="https://manosbatsis.github.io/corbeans/" /><meta name="og:type" content="website" /><meta name="og:description" content="Corda integration for Spring-Boot" /><link rel="icon" type="image/png" href="/corbeans/img/favicon.png" /><meta name="twitter:title" content="corbeans: Spring-Boot Starter" /><meta name="twitter:image" content="https://manosbatsis.github.io/corbeans/img/poster.png" /><meta name="twitter:description" content="Corda integration for Spring-Boot" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/corbeans/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/corbeans/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/corbeans/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/corbeans/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/corbeans/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/corbeans/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/corbeans/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/corbeans/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/corbeans/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/corbeans/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/corbeans/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/corbeans/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/corbeans/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/corbeans/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/corbeans/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/corbeans/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/corbeans/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/corbeans/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/corbeans/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/corbeans/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/corbeans/highlight/styles/github.css" /><link rel="stylesheet" href="/corbeans/css/style.css" /><link rel="stylesheet" href="/corbeans/css/palette.css" /><link rel="stylesheet" href="/corbeans/css/codemirror.css" /><link rel="stylesheet" href="/corbeans/css/override.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/corbeans/" class="brand"><div class="brand-wrapper"><span>corbeans</span></div></a></li> <li><a href="/corbeans/docs/index.html" class="">Introduction</a></li> <li><a href="/corbeans/docs/starter.html" class="">Spring Boot Starter</a></li> <li><a href="/corbeans/docs/starter-test.html" class="">Starter Test</a></li> <li><a href="/corbeans/docs/data-rpc.html" class="">Data RPC</a></li> <li><a href="/corbeans/docs/webserver.html" class="">Sample Webserver</a></li> <li><a href="/corbeans/docs/build-howto.html" class="">Build Howto</a></li> <li><a href="/corbeans/dokka/corbeans/" class="">KDoc API Reference</a></li> <li><a href="/corbeans/docs/acknowledgements.html" class="">Acknowledgements</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li><a href="#" onclick="shareSiteTwitter('corbeans Corda integration for Spring-Boot');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('corbeans Corda integration for Spring-Boot');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="manosbatsis" data-github-repo="corbeans"><div class="content-wrapper"><section><h1 id="spring-boot-starter">Spring-Boot Starter</h1>

<p>The<code class="highlighter-rouge">corbeans-spring-boot-starter</code> module makes it easy for Spring Boot applications to interact with Corda networks. The starter 
reads your application.properties and auto-configures Spring components to expose Corda nodes via 
<a href="https://docs.corda.net/clientrpc.html">RPC</a>.</p>

<p>The components include REST Controller, Service components and simple 
RPC connection wrappers used to obtain a <code class="highlighter-rouge">CordaRPCOps</code> proxy for each Corda node.</p>

<p>The following sections how to quickly get started with corbeans in your project.</p>

<h2 id="installation">Installation</h2>

<p>To install the starter, add the dependency to your build  using either the Gradle or Maven example bellow.</p>

<h3 id="for-gradle-users">For Gradle Users</h3>

<p>Corbeans is available in Maven central.</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">repositories</span> <span class="o">{</span>
	<span class="n">mavenCentral</span><span class="o">()</span>
	<span class="c1">// OR, if changes have not yet been reflected to central:</span>
	<span class="c1">// maven { url "http://oss.sonatype.org/content/repositories/releases/" }</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Add the starter dependency:</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
	<span class="n">implementation</span> <span class="s1">'com.github.manosbatsis.corbeans:corbeans-spring-boot-starter:0.17'</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="for-maven-users">For Maven Users</h3>

<p>Add the dependency in your Maven POM:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>com.github.manosbatsis.corbeans<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>corbeans-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>0.17<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h2 id="configuration">Configuration</h2>

<p>Add nodes in your <code class="highlighter-rouge">application.properties</code> following the example bellow.
Use the party name for each node you want to the starter to register components for.
In this example, we create components for nodes e.g.  “PartyA” and, “PartyB”:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># node for PartyA
</span><span class="py">corbeans.nodes.PartyA.username</span><span class="p">=</span><span class="s">user1</span>
<span class="py">corbeans.nodes.PartyA.password</span><span class="p">=</span><span class="s">test</span>
<span class="py">corbeans.nodes.PartyA.address</span><span class="p">=</span><span class="s">localhost:10006</span>

<span class="c"># node for PartyB
</span><span class="py">corbeans.nodes.PartyB.username</span><span class="p">=</span><span class="s">user1</span>
<span class="py">corbeans.nodes.PartyB.password</span><span class="p">=</span><span class="s">test</span>
<span class="py">corbeans.nodes.PartyB.address</span><span class="p">=</span><span class="s">localhost:10009</span>
</code></pre></div></div>

<h3 id="registered-beans">Registered Beans</h3>

<p>The auto-configuration will generate and register the following beans per Corda Node added in the application config:</p>

<table>
  <thead>
    <tr>
      <th>Bean Type</th>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>NodeRpcConnection</td>
      <td>{nodeName}RpcConnection</td>
      <td>Provides an Node RPC connection proxy</td>
    </tr>
    <tr>
      <td>CordaNodeService</td>
      <td>{nodeName}NodeService</td>
      <td>A Node Service Bean</td>
    </tr>
  </tbody>
</table>

<h3 id="endpoints">Endpoints</h3>

<p>A controller is also added with endpoints exposing business methods for all
listing identity, network peers, notaries, flows, states, finding attachments etc.</p>

<table>
  <thead>
    <tr>
      <th>Method</th>
      <th>Path</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/serverTime</td>
      <td>Return tbe node time in UTC</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/whoami</td>
      <td>Returns the Node identity’s name</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/me</td>
      <td>Returns the Node identity’s x500Principal name</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/peers</td>
      <td>Returns a list of the node’s network peers</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/peersnames</td>
      <td>Returns a list of the node’s network peer names</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/peersnames</td>
      <td>Returns a list of node’s network peer names</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/attachment/{id}</td>
      <td>Returns the attachment mathing the given ID</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/addresses</td>
      <td>Returns a list of node addresses</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/notaries</td>
      <td>Returns a list of notaries in node’s network</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/states</td>
      <td>Returns a list of states</td>
    </tr>
    <tr>
      <td>GET</td>
      <td>/nodes/{nodeName}/flows</td>
      <td>Returns a list of flow classnames</td>
    </tr>
  </tbody>
</table>

<h3 id="advanced-configuration">Advanced Configuration</h3>

<p>You can instruct corbeans to create and register your custom service implementations. 
The only requirement is that you have to extend <code class="highlighter-rouge">CordaNodeServiceImpl</code> 
(or <code class="highlighter-rouge">CordaNodeServiceImpl</code> and so on), for example:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">com.github.manosbatsis.corbeans.spring.boot.corda.CordaNodeServiceImpl</span>
<span class="k">import</span> <span class="nn">com.github.manosbatsis.corbeans.spring.boot.corda.util.NodeRpcConnection</span>


<span class="kd">class</span> <span class="nc">SampleCustomCordaNodeServiceImpl</span><span class="p">(</span>
        <span class="n">nodeRpcConnection</span><span class="p">:</span> <span class="n">NodeRpcConnection</span>
<span class="p">)</span> <span class="p">:</span> <span class="n">CordaNodeServiceImpl</span><span class="p">(</span><span class="n">nodeRpcConnection</span><span class="p">)</span> <span class="p">{</span>

    <span class="cm">/** dummy method */</span>
    <span class="k">fun</span> <span class="nf">dummy</span><span class="p">():</span> <span class="n">Boolean</span> <span class="p">=</span> <span class="k">true</span>

<span class="p">}</span>

</code></pre></div></div>

<p>Then instruct corbeans to use your custom service type via the 
<code class="highlighter-rouge">primaryServiceType</code> property for the desired node:</p>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># node for PartyB
# ...
</span><span class="py">corbeans.nodes.PartyA.primaryServiceType</span><span class="p">=</span><span class="s">my.subclass.of.CordaNodeServiceImpl</span>
</code></pre></div></div>

<h2 id="autowiring-services">Autowiring Services</h2>

<p>Service beans registered by corbeans may be autowired as any other component, for example:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// autowire all created services, mapped by name
</span>    <span class="n">@Autowired</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">services</span><span class="p">:</span> <span class="n">Map</span><span class="p">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">CordaNodeService</span><span class="p">&gt;</span>

    <span class="c1">// autowire a services for a specific node
</span>    <span class="n">@Autowired</span>
    <span class="n">@Qualifier</span><span class="p">(</span><span class="s">"partyANodeService"</span><span class="p">)</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">service</span><span class="p">:</span> <span class="n">CordaNodeService</span>

    <span class="c1">// autowire a unique custom service
</span>    <span class="n">@Autowired</span>
    <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">customCervice</span><span class="p">:</span> <span class="n">SampleCustomCordaNodeServiceImpl</span>
</code></pre></div></div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/corbeans/highlight/highlight.pack.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/gradle.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/xml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/properties.min.js"></script><script>hljs.configure({languages:['kotlin','java','gradle','xml','bash','properties']});
hljs.initHighlighting();
              </script><script>((window.gitter = {}).chat = {}).options = {
room: 'manosbatsis/corbeans'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/corbeans/js/main.js"></script></body></html>